---
permalink: keystone/reference/0.3.x-json/page/session-signin.json
---
{
  "action": "simple documentation",
  "command": "page",
  "success": true,
  "message": "Have a great day!",
  "code": 200,
  "title": "Keystone.session.signin",
  "slug": "session-signin",
  "page": {
    "_id": "56da2d4ee6045843301b31c2",
    "title": "Keystone.session.signin",
    "menuTitle": ".signin",
    "parent": {
      "_id": "56da2889dc8aef5a45e620ed",
      "order": 34,
      "slug": "keystone-session",
      "title": "Keystone.session helpers",
      "parent": "56ce85b72016dcfc71d320fd"
    },
    "slug": "session-signin",
    "publish": "published",
    "sortNumber": "append",
    "type": 1,
    "links": [],
    "markdown": {
      "md": "#### .session.signin( user, req, res, onSuccess, onFail )\n> *@param* **user** _{Object}_  - user object  \n> *@param* **req** _{Object}_  - express request object  \n> *@param* **res** _{Object}_  - express response object  \n> *@param* **onSuccess** _{Object}_  - onSuccess callback, is passed the User instance  \n> *@param* **onFail** _{Object}_  - onFail callback  \n\nSigns in a user user matching the lookup filters \n\n<div class=\"code-header\"> <h4>Example</h4>From <a href=\"http://www.sydjs.com\" target=\"_blank\">sydjs.com</a> <a href=\"https://github.com/JedWatson/sydjs-site/blob/master/routes/views/session/signin.js\" target=\"_blank\">(code)</a></div><pre class=\" language-javascript\"><code class=\"language-javascript\">\nfunction(req, res) {\n\t\n\tif (req.user) {\n\t\treturn res.redirect(req.cookies.target || '/me');\n\t}\n\t\n\tvar view = new keystone.View(req, res),\n\t\tlocals = res.locals;\n\t\n\tlocals.section = 'session';\n\tlocals.form = req.body;\n\t\n\tview.on('post', { action: 'signin' }, function(next) {\n\t\t\n\t\tif (!req.body.email || !req.body.password) {\n\t\t\treq.flash('error', 'Please enter your username and password.');\n\t\t\treturn next();\n\t\t}\n\t\t\n\t\tvar onSuccess = function() {\n\t\t\tif (req.body.target && !/join|signin/.test(req.body.target)) {\n\t\t\t\tconsole.log('[signin] - Set target as [' + req.body.target + '].');\n\t\t\t\tres.redirect(req.body.target);\n\t\t\t} else {\n\t\t\t\tres.redirect('/me');\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar onFail = function() {\n\t\t\treq.flash('error', 'Your username or password were incorrect, please try again.');\n\t\t\treturn next();\n\t\t}\n\t\t\n\t\tkeystone.session.signin({ email: req.body.email, password: req.body.password }, req, res, onSuccess, onFail);\n\t\t\n\t});\n\t\n\tview.render('session/signin');\n\t\n}\n</code></pre>\n\n<div class=\"code-header addGitHubLink\" data-file=\"lib/session.js#L71-L116\"> &nbsp;</div><pre class=\" language-javascript hideCode api\"></pre> \n",
      "html": "<h4 id=\"-session-signin-user-req-res-onsuccess-onfail-\">.session.signin( user, req, res, onSuccess, onFail )</h4>\n<blockquote>\n<p><em>@param</em> <strong>user</strong> <em>{Object}</em>  - user object<br><em>@param</em> <strong>req</strong> <em>{Object}</em>  - express request object<br><em>@param</em> <strong>res</strong> <em>{Object}</em>  - express response object<br><em>@param</em> <strong>onSuccess</strong> <em>{Object}</em>  - onSuccess callback, is passed the User instance<br><em>@param</em> <strong>onFail</strong> <em>{Object}</em>  - onFail callback  </p>\n</blockquote>\n<p>Signs in a user user matching the lookup filters </p>\n<p><div class=\"code-header\"> <h4>Example</h4>From <a href=\"http://www.sydjs.com\" target=\"_blank\">sydjs.com</a> <a href=\"https://github.com/JedWatson/sydjs-site/blob/master/routes/views/session/signin.js\" target=\"_blank\">(code)</a></div><pre class=\" language-javascript\"><code class=\"language-javascript\">\nfunction(req, res) {</p>\n<pre><code>if (req.user) {\n    return res.redirect(req.cookies.target || &#39;/me&#39;);\n}\n\nvar view = new keystone.View(req, res),\n    locals = res.locals;\n\nlocals.section = &#39;session&#39;;\nlocals.form = req.body;\n\nview.on(&#39;post&#39;, { action: &#39;signin&#39; }, function(next) {\n\n    if (!req.body.email || !req.body.password) {\n        req.flash(&#39;error&#39;, &#39;Please enter your username and password.&#39;);\n        return next();\n    }\n\n    var onSuccess = function() {\n        if (req.body.target &amp;&amp; !/join|signin/.test(req.body.target)) {\n            console.log(&#39;[signin] - Set target as [&#39; + req.body.target + &#39;].&#39;);\n            res.redirect(req.body.target);\n        } else {\n            res.redirect(&#39;/me&#39;);\n        }\n    }\n\n    var onFail = function() {\n        req.flash(&#39;error&#39;, &#39;Your username or password were incorrect, please try again.&#39;);\n        return next();\n    }\n\n    keystone.session.signin({ email: req.body.email, password: req.body.password }, req, res, onSuccess, onFail);\n\n});\n\nview.render(&#39;session/signin&#39;);\n</code></pre><p>}\n</code></pre></p>\n<p><div class=\"code-header addGitHubLink\" data-file=\"lib/session.js#L71-L116\"> &nbsp;</div><pre class=\" language-javascript hideCode api\"></pre> </p>\n"
    },
    "display": 1
  }
}
