---
permalink: simpledocs-json/page/send.json
---
{
  "action": "simple documentation",
  "command": "page",
  "success": true,
  "message": "Have a great day!",
  "code": 200,
  "title": "Keystone.Email.send",
  "slug": "send",
  "page": {
    "_id": "56d232a562dab7af73a83415",
    "sortBy": 1,
    "currentOrder": 8,
    "order": 8,
    "slug": "send",
    "updatedBy": "56d3ec56c3bc4bb55f32eb6f",
    "updatedAt": "2016-03-01T07:13:45.208Z",
    "createdBy": "54ce583de345cf3359db79bd",
    "createdAt": "2016-02-27T23:35:01.146Z",
    "key": "keystoneemailsend",
    "title": "Keystone.Email.send",
    "parent": {
      "_id": "56ce866b2016dcfc71d32101",
      "order": 28,
      "slug": "email",
      "title": "Keystone.Email Class",
      "parent": "56ce85b72016dcfc71d320fd"
    },
    "publish": "published",
    "sortNumber": "8",
    "type": 1,
    "links": [],
    "display": 1,
    "externalLinks": "",
    "markdown": {
      "html": "<h4 id=\"email-send-_locals-_-options-_callback_-\">Email.send( [ <em>locals </em> ,] options [, <em>callback</em> ] )</h4>\n<blockquote>\n<p><em>@param</em> <strong>locals</strong> <em>{Object}</em>  - backwards compatibility<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - passed to <code>Email.render()</code><br><em>@param</em> <strong>callback</strong> <em>{Object}</em>  - callback(err, info)    </p>\n</blockquote>\n<p class=\"api-note\"> For compatibility with older implementations, send supports providing locals and options objects as the first and second arguments, and the callback as the third.  Typical use case should be <code>.send( options, callback )</code></p>\n\n<p> Options:</p>\n<ul>\n<li><strong>mandrill</strong> - Initialised Mandrill API instance</li>\n<li><strong>templateMandrillName</strong> - the immutable name or slug of a template that exists in the user&#39;s account. For backwards-compatibility, the template name may also be used but the immutable slug is preferred.  Validation: required.  </li>\n<li><strong>templateMandrillContent</strong> - an array of template content to send. Each item in the array should be an object with two keys - name: the name of the content block to set the content for, and content: the actual content to put into the block<pre><code class=\"language-javascript\"> options.templateMandrillContent = [\n     {\n         &quot;name&quot;: &quot;header&quot;,\n         &quot;content&quot;: &quot;&lt;h2&gt;&quot; + keystone.get(&#39;name&#39;) + &quot;&lt;/h2&gt;&quot;\n     }\n ]\n</code></pre>\n</li>\n<li><strong>tags</strong> - an array of <strong>Strings</strong> to tag the message with. Stats are accumulated using tags, and only the first 100 are stored, so this should not be unique or change frequently. Tags should be 50 characters or less. Any tags starting with an underscore are reserved for internal use and will cause errors.   </li>\n<li><strong>html</strong> - the full HTML content to be sent </li>\n<li><strong>attachments</strong> - an array of supported attachments to add to the message  <pre><code class=\"language-javascript\"> options.attachments = [\n     {\n         type: MIME_TYPE,\n         name: FILE_NAME,\n         content: BASE64_STRING\n     },\n ]\n</code></pre>\n</li>\n<li><strong>to</strong> - Object / String or Array of Objects / Strings to send to, e.g.  <pre><code class=\"language-javascript\">[&#39;email2@domain.tld&#39;, { email: &#39;email@domain.tld&#39; }]\n{ email: &#39;email4@domain.tld&#39; }\n&#39;email0@domain.tld&#39;\n</code></pre>\n</li>\n<li><strong>from</strong> - <code>{ name: &#39;Ted&#39;, email: &#39;ted@domain.tld&#39; }</code> or <code>&#39;ted@domain.tld&#39;</code>  </li>\n<li><strong>fromName</strong> - Name to send from  </li>\n<li><strong>fromEmail</strong> - Email address to send from</li>\n<li><strong>mandrillOptions</strong> - any other <a href=\"https://mandrillapp.com/api/docs/messages.JSON.html#method=send-template\" target=\"_blank\"> Mandrill <strong>message</strong> Option</a> <pre><code class=\"language-javascript\"> options.mandrillOptions = {\n     // whether or not to turn on open tracking for the message\n     track_opens: true,\n     // whether or not to turn on click tracking for the message\n     track_clicks: true, \n     // whether or not to expose all recipients in the &quot;To&quot; header for each email\n     preserve_recipients: false, \n     // whether or not to automatically inline all CSS styles provided \n     // in the message HTML - only for HTML documents less than 256KB in size\n     inline_css: true \n },\n</code></pre>\n</li>\n</ul>\n<p class=\"caution-note\"> You must include an  email address with either <code>from</code> or <code>fromEmail</code> </p>\n\n<div class=\"code-header\"> <h4>Send an email</h4></div><pre class=\" language-javascript\"><code class=\"language-javascript\">\n     var Email = new keystone.Email({ \n                templateMandrillName: &#39;welcome&#39;,\n                templateMandrillContent: [\n                    {\n                        &quot;name&quot;: &quot;header&quot;,\n                        &quot;content&quot;: &quot;<h2></h2>&quot;\n                    }\n                ]\n            });\n\n            Email.send({\n                to: req.body.email,\n                from: {\n                    name: &#39;from name&#39;,\n                    email: &#39;from@domain.tld&#39;\n                },\n                subject: &#39;subject&#39;\n                templateMandrillContent: [\n                    {\n                        &quot;name&quot;: &quot;main&quot;,\n                        &quot;content&quot;: &quot;custom html for main block&quot;\n                    }\n                ],\n                mandrillOptions: {\n                    track_opens: false,\n                    track_clicks: false\n                },\n            }, \n            function(err, info) {\n                //console.log(err, info);\n            });\n</code></pre>\n<div class=\"contextual-note\">\n<h4> Explanation</h4> \n<p>We defined a template at Mandrill and set <code>templateMandrillName: &#39;welcome&#39;</code>. This will bypass <code>Email.render()</code> and send template information.  <br /> We add <code>templateMandrillContent</code> template blocks in both the <strong>Email</strong> constructor and in <code>.send</code>.  </p>\n</div> \n\n\n<p><div class=\"code-header addGitHubLink\" data-file=\"lib/email.js#L537-L630\"> &nbsp;</div><pre class=\" language-javascript hideCode api\"></pre> </p>\n",
      "md": "#### Email.send( [ _locals _ ,] options [, _callback_ ] ) \r\n> *@param* **locals** _{Object}_  - backwards compatibility   \r\n> *@param* **options** _{Object}_  - passed to `Email.render()`  \r\n> *@param* **callback** _{Object}_  - callback(err, info)    \r\n\r\n\r\n<p class=\"api-note\"> For compatibility with older implementations, send supports providing locals and options objects as the first and second arguments, and the callback as the third.  Typical use case should be `.send( options, callback )`</p>\r\n\r\n Options:\r\n\r\n * **mandrill** - Initialised Mandrill API instance\r\n * **templateMandrillName** - the immutable name or slug of a template that exists in the user's account. For backwards-compatibility, the template name may also be used but the immutable slug is preferred.  Validation: required.  \r\n * **templateMandrillContent** - an array of template content to send. Each item in the array should be an object with two keys - name: the name of the content block to set the content for, and content: the actual content to put into the block\r\n ```javascript \r\n\toptions.templateMandrillContent = [\r\n\t\t{\r\n\t\t\t\"name\": \"header\",\r\n\t\t\t\"content\": \"<h2>\" + keystone.get('name') + \"</h2>\"\r\n\t\t}\r\n\t]\r\n ```\r\n * **tags** - an array of **Strings** to tag the message with. Stats are accumulated using tags, and only the first 100 are stored, so this should not be unique or change frequently. Tags should be 50 characters or less. Any tags starting with an underscore are reserved for internal use and will cause errors.   \r\n * **html** - the full HTML content to be sent \r\n * **attachments** - an array of supported attachments to add to the message  \r\n ```javascript\r\n\toptions.attachments = [\r\n\t\t{\r\n\t\t\ttype: MIME_TYPE,\r\n\t\t\tname: FILE_NAME,\r\n\t\t\tcontent: BASE64_STRING\r\n\t\t},\r\n\t]\r\n ```\r\n * **to** - Object / String or Array of Objects / Strings to send to, e.g.  \r\n ```javascript\r\n   ['email2@domain.tld', { email: 'email@domain.tld' }]\r\n   { email: 'email4@domain.tld' }\r\n   'email0@domain.tld'\r\n ``` \r\n * **from** - `{ name: 'Ted', email: 'ted@domain.tld' }` or `'ted@domain.tld'`  \r\n * **fromName** - Name to send from  \r\n * **fromEmail** - Email address to send from\r\n * **mandrillOptions** - any other <a href=\"https://mandrillapp.com/api/docs/messages.JSON.html#method=send-template\" target=\"_blank\"> Mandrill **message** Option</a> \r\n ```javascript\r\n\toptions.mandrillOptions = {\r\n\t\t// whether or not to turn on open tracking for the message\r\n\t\ttrack_opens: true,\r\n\t\t// whether or not to turn on click tracking for the message\r\n\t\ttrack_clicks: true, \r\n\t\t// whether or not to expose all recipients in the \"To\" header for each email\r\n\t\tpreserve_recipients: false, \r\n\t\t// whether or not to automatically inline all CSS styles provided \r\n\t\t// in the message HTML - only for HTML documents less than 256KB in size\r\n\t\tinline_css: true \r\n\t},\r\n ```   \r\n \r\n<p class=\"caution-note\"> You must include an  email address with either `from` or `fromEmail` </p>\r\n\r\n<div class=\"code-header\"> <h4>Send an email</h4></div><pre class=\" language-javascript\"><code class=\"language-javascript\">\r\n\t var Email = new keystone.Email({ \r\n                templateMandrillName: 'welcome',\r\n                templateMandrillContent: [\r\n                    {\r\n                        \"name\": \"header\",\r\n                        \"content\": \"<h2></h2>\"\r\n                    }\r\n                ]\r\n            });\r\n\r\n            Email.send({\r\n                to: req.body.email,\r\n                from: {\r\n                    name: 'from name',\r\n                    email: 'from@domain.tld'\r\n                },\r\n                subject: 'subject'\r\n                templateMandrillContent: [\r\n                    {\r\n                        \"name\": \"main\",\r\n                        \"content\": \"custom html for main block\"\r\n                    }\r\n                ],\r\n                mandrillOptions: {\r\n                    track_opens: false,\r\n                    track_clicks: false\r\n                },\r\n            }, \r\n            function(err, info) {\r\n                //console.log(err, info);\r\n            });\r\n</code></pre>\r\n<div class=\"contextual-note\">\r\n<h4> Explanation</h4> \r\n<p>We defined a template at Mandrill and set `templateMandrillName: 'welcome'`. This will bypass `Email.render()` and send template information.  <br /> We add `templateMandrillContent` template blocks in both the **Email** constructor and in `.send`.  </p>\r\n</div> \r\n\r\n\r\n<div class=\"code-header addGitHubLink\" data-file=\"lib/email.js#L537-L630\"> &nbsp;</div><pre class=\" language-javascript hideCode api\"></pre> \r\n"
    },
    "menuTitle": ".send"
  }
}
